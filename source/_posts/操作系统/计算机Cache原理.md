---
title: 计算机Cache原理
date: 2019-02-14 16:09:02
tags: Cache
category: 计算机
---

#### 主存

因为在讲Cache的时候会涉及到主存的相关知识点，所以先讲主存的一些知识点

##### 主存中的地址分配

在计算机中，主存各存储单元的空间位置是由单元地址号来表示的，而地址总线是用来指出存储单元的地址号的；一般来说，CPU在读取主存中的数据的时候，既可以以字寻址，也可以按字节寻址；至于字和字节的关系，就用下面的图来表示

![](https://s2.ax1x.com/2019/02/14/kB5gnf.png)

字地址有用高位字节表示和低位字节表示，这里演示使用的是高位字节表示；这里的一个字地址就是 后面会提到的字块；所以在地址线用地址号来寻址的时候，字地址会用高地址表示，然后使用一定的低地址位来表示字节地址；

还需要说明一下缓存行与字地址的关系；一个缓存行就是一个字块(字地址表示的内存位置)

在Cache映射算法中，组相联映射中，一个组包含多个缓存行也就表示一个组包含多个字块

Cache一次刷新的也是一个缓存行

#### 高速缓存

##### 概述

1. 使用原因
2. 局部性原理

##### 基本结构及其基本工作原理

实现缓存由以下几块：Cache存储体，地址映射变换机构，Cache替换机构

在缓存和主存中，都有相同的块大小，所以缓存中可以缓存主存中的字块；其基本工作过程如下面的图片

![](https://images0.cnblogs.com/blog/412166/201304/02205156-ba2ba294509e45eab399d6dd9ddd7119.png)

1. Cache的读写操作

   在Cache读的过程中，不仅需要获取需要的数据，如果不是从缓存中得到的数据还要讲数据存入缓存中去；

   在Cache写的过程有两种方法：

   - 写回法：即写操作时只把数据写入Cache而不写入主存，但当Cache数据被替换才写入主存
   - 写直达法：每次写操作不仅要写入缓存还要写回主存

2. Cache的改进

   - 二级缓存

   - 统一缓存和分立缓存

     定义：统一缓存就是将指令和数据都放在一个Cache内；而分立缓存指的是指令和数据的分别放在两个缓存中，一个为数据Cache，一个为指令Cache；

     实现分立Cache的原因是实现超前控制或者叫指令预取；如果指令和数据不分开可能出现取值和执行过程对同一缓存的征用，也就不能达到指令预取的目的指令的预取和执行并行执

     