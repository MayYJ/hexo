---
title: final关键字总结
date: 2019-02-20 19:51:12
tags: final
---

#### 基本用法

1. 修饰变量

   final可以修饰成员变量和本地本地变量，在声明变量的时候就必须赋值，且为只读，如果尝试再次初始化编译器将会报错

2. 修饰方法

   final 修饰方法的意义在于子类不能复写此方法；final方法编译的时候就可以绑定具体的方法地址，不需要运行时动态绑定；final和static关键字不能同时修饰一个方法，因为static方法子类也不能够复写，在不需要运行时绑定包含了final的语义

3. 修饰类

   final 修饰类意义在于表明该类不能被继承，JDK中许多类都是final的，比如说String，Integer以及其它包装类

#### final 的重排序的规则

1. 在构造函数内对一个final域的写入，与随后把这个被构造对象的引用赋值给一个引用变量，这两个操作不能重排序
2. 初次读一个包含final域的对象的引用与读这个final域不能重排序

稍微解释一下：

对于第一条在线程下，可能在属性还没有被赋值完成，该对象的引用就已经被传递出去了；所以对final域的写能够保证对象在构造完之后才能够传递出去

对于第二条，其实这两个操作本来就包含了间接依赖，必须有了对象的引用才能够去读对象中的属性，只是有些处理器没有支持，这个没有什么讲的